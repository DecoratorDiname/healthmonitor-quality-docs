# Нефункциональные требования (Non-Functional Requirements, NFR) для HealthMonitor

### `NFR-PERF-01`
**Название:** Время ответа API эндпоинта сбора метрик.

**Описание:** 95-й перцентиль времени ответа для POST `/api/v1/metrics` не должен превышать указанного значения.

**Метрика и целевое значение:** 95-й перцентиль (p95) < 200 мс.

**Способ проверки:** Нагрузочное тестирование с помощью k6.

---

### `NFR-RELI-01`
**Название:** Доступность сервиса.

**Описание:** Сервис должен быть доступен для пользователей с уровнем доступности не менее 99.9% в месяц.

**Метрика и целевое значение:** Время безотказной работы (uptime) ≥ 99.9% в месяц.

**Способ проверки:** Мониторинг uptime с помощью системы Prometheus и оповещения через Alertmanager.

---

### `NFR-SECU-01`
**Название:** Аутентификация пользователей.

**Описание:** Все API эндпоинты должны требовать аутентификацию с использованием OAuth 2.0 или JWT.

**Метрика и целевое значение:** 100% защищённых эндпоинтов, без возможности доступа для неаутентифицированных запросов.

**Способ проверки:** Проведение аудита безопасности и автоматическое тестирование с попытками доступа без токена.

---

### `NFR-MAINT-01`
**Название:** Логирование событий.

**Описание:** Все критические операции и ошибки должны логироваться с указанием времени, пользователя и описания события.

**Метрика и целевое значение:** 100% критических событий должны попадать в лог с корректными метаданными.

**Способ проверки:** Проверка логов через ELK стек или аналогичные системы, анализ полноты и корректности логов.

---

### `NFR-PERF-02`
**Название:** Время обработки запросов мониторинга.

**Описание:** Среднее время обработки запросов на получение дашборда мониторинга не должно превышать установленного порога.

**Метрика и целевое значение:** Среднее время < 150 мс.

**Способ проверки:** Профилирование и нагрузочное тестирование с использованием Grafana и Prometheus.

---

### `NFR-RELI-02`
**Название:** Восстановление после сбоев.

**Описание:** В случае сбоя сервис должен восстановиться и возобновить работу в течение 5 минут.

**Метрика и целевое значение:** Время восстановления (RTO) ≤ 5 минут.

**Способ проверки:** Проведение испытаний аварийного восстановления и анализ логов.

---

### `NFR-SECU-02`
**Название:** Шифрование данных.

**Описание:** Все передаваемые и хранящиеся данные должны быть зашифрованы.

**Метрика и целевое значение:** Использование TLS 1.2+ для передачи данных, AES-256 для хранения.

**Способ проверки:** Проведение аудита безопасности и проверка конфигурации SSL и хранения данных.

---

### `NFR-MAINT-02`
**Название:** Обновляемость и развертывание.

**Описание:** Система должна поддерживать безотказное обновление с минимальным временем простоя.

**Метрика и целевое значение:** Время простоя при обновлении < 1 минута.

**Способ проверки:** Тестирование процесса обновления в staging среде.

---

*Документ описывает ключевые нефункциональные требования, влияющие на качество и надёжность сервиса HealthMonitor.*
